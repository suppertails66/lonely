// Target: cave music for levels 1/2 of original game

// Write generic data in the free block past the end of level data
_GENERICADDR = 0x1BCE5;
// Overwrite the real channels at their original locations so we
// don't have to update the pointers
_SQ1ADDR = 0x18817;
_SQ2ADDR = 0x18923;
_TRIADDR = 0x18997;

// Song init. This only needs to happen on one channel.
_SQ1 = { DRIVERDELAY(0x00) TEMPO(1) MASTSHIFT(0) };

// Channel init
_SQ1 = { CHANSHIFT(0) EFFECTS(0) DECAY(1) CHANVOL(0x0B)
	 REG1(0xBF) REG2(0x08) };
_SQ2 = { CHANSHIFT(0) EFFECTS(0) DECAY(5) CHANVOL(0x0B)
	 REG1(0xBF) REG2(0x08) };
_TRI = { CHANSHIFT(0) EFFECTS(0)
	 REG1(0xFF) REG2(0x08) };
	 
$q = "CHANVOL(0x04)";
$l = "CHANVOL(0x0B)";

//*******************************
// Triangle
//*******************************

//$kick = "NOISE(0x83, 0x0F)";
//$sn = "NOISE(0x83, 0x06)";
//$ch = "NOISE(0x81, 0x01)";
$trkick = "f3 1 eb3 1 c3 1 a2 1 f#2 1 d2 1";
$trrevsn = "g#1 1 b1 1 e2 1 f#2 1 a2 1 b2 1 d3 1 e3 1 g3 1 a3 1 c4 1 d4 1";

_GENERIC = {
	     
	     RET()
};

$sq12 = "REG1(0x3F)";
$sq25 = "REG1(0x7F)";
$sq50 = "REG1(0xBF)";
$sq75 = "REG1(0xFF)";
_SQ1 = { 
         SETLOOP()
          c4 24 d4 24 e4 24 f4 24 g4 24 a4 24 b4 24 c5 24
          REG2(0x38)
         REPLAYLOOP(1) };
_SQ2 = { r 6 };
_TRI = { r 6 };
